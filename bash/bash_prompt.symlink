#
# A minimal PS1 with git branch support.
#

parse_git_branch() {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\ \(\1\)/'
}

#
# Different PS1 for non- and login shells
#

if [ -n "$SSH_CLIENT" ] || [ -n "$SSH_TTY" ]; then
  # ssh
  export PS1="\n    \[\e[00;36m\]λ\[\e[0m\] (\h) \W\[\e[00;37m\]\$(parse_git_branch)\[\e[0m\]: "
else
  # local
  export PS1="\n    \[\e[00;36m\]λ\[\e[0m\] \W\[\e[00;37m\]\$(parse_git_branch)\[\e[0m\]: "
fi
